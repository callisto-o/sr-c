# Shadowrocket: 2026-02-16 09:35:37
[General]
# Обход системных сервисов (Appple, Push-уведомления)
bypass-system = true

# Белый список IP-CIDR которые идут в PROXY, все остальное в DIRECT.
tun-included-routes = 

# Домены, которым нужен реальный IP (NTP, Cloudflare и Google)
always-real-ip = *.apple.com,*.icloud.com,time.*.com,ntp.*.com,*.cloudflareclient.com,*.ru

# Перехват DNS-запросов на стандартном порту 53
hijack-dns = :53

# Список локальных адресов и доменов, которые всегда идут в DIRECT.
# Приложение видит трафик, но не обрабатывает правилами (пойдет через виртуальный интерфейс).
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com

# Черный список IP-CIDR, которые идут в DIRECT, все остальное в PROXY.
# Трафик вообще не заходит в приложение (пойдет мимо виртуального интерфейса).
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 172.20.10.0/24, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

# Основные DNS-серверы
dns-server = quic://dns.adguard-dns.com, h3://8.8.8.8/dns-query, h3://1.1.1.1/dns-query, https://8.8.8.8/dns-query, https://1.1.1.1/dns-query

# Резервные DNS-серверы на случай сбоя основных
fallback-dns-server = tls://8.8.8.8, tls://1.1.1.1, https://94.140.14.14/dns-query, system

# Использование ipv6 (false - отключено)
ipv6 = false

# Приоритет IPv6 над IPv4
prefer-ipv6 = false

# Использовать ли системный DNS для правил DIRECT (true - да)
dns-direct-system = true

# Использовать ли системный DNS автоматически, если основные упали (false — нет, строго следовать списку fallback-dns-server)
dns-fallback-system = false

# Авто-ответ на пинг (false - отключено)
# Когда игра или система проверяет пинг, Shadowrocket сам быстро отвечает "Я тут, связь есть", не гоняя пакет на далекий сервер.
icmp-auto-reply = false

# Защита от зацикливания
# Если правило URL Rewrite (переадресация) ведет в никуда или вызывает ошибку, Shadowrocket просто сбросит соединение
always-reject-url-rewrite = true

# Разрешать локальные IP в DNS ответах (важно для работы в домашней сети)
private-ip-answer = true

# Если прямой DNS запрос не прошел, пробовать отправить его через прокси
dns-direct-fallback-proxy = true

# Сбрасывать UDP-трафик, если выбранный прокси-узел его не поддерживает
udp-policy-not-supported-behaviour = REJECT

[Rule]
RULE-SET,https://raw.githubusercontent.com/callisto-o/sr-c/refs/heads/main/reject.list,REJECT
RULE-SET,https://raw.githubusercontent.com/misha-tgshv/shadowrocket-configuration-file/main/rules/voice_ports.list,PROXY
RULE-SET,https://raw.githubusercontent.com/misha-tgshv/shadowrocket-configuration-file/main/rules/domains_community.list,PROXY
RULE-SET,https://raw.githubusercontent.com/HybridNetworks/whatsapp-cidr/refs/heads/main/WhatsApp/whatsapp_cidr_ipv4.list,PROXY,no-resolve
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Shadowrocket/Telegram/Telegram.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Shadowrocket/Discord/Discord.list,PROXY
RULE-SET,https://github.com/toneywhitez/zkeen_rules/releases/latest/download/telegram_ips.list,PROXY,no-resolve
RULE-SET,https://github.com/toneywhitez/zkeen_rules/releases/latest/download/meta_ips.list,PROXY,no-resolve

DOMAIN,api.imem.app,PROXY
DOMAIN,api.swiftgram.app,PROXY

DOMAIN-SUFFIX,musical.ly,PROXY
DOMAIN-SUFFIX,google.com,PROXY
DOMAIN-SUFFIX,oaiusercontent.com,PROXY
DOMAIN-SUFFIX,whoer.net,PROXY
DOMAIN-SUFFIX,windscribe.com,PROXY
DOMAIN-SUFFIX,cdn-telegram.org,PROXY
DOMAIN-SUFFIX,comments.app,PROXY
DOMAIN-SUFFIX,contest.com,PROXY
DOMAIN-SUFFIX,graph.org,PROXY
DOMAIN-SUFFIX,legra.ph,PROXY
DOMAIN-SUFFIX,mbrx.app,PROXY
DOMAIN-SUFFIX,quiz.directory,PROXY
DOMAIN-SUFFIX,stel.com,PROXY
DOMAIN-SUFFIX,t.me,PROXY
DOMAIN-SUFFIX,tdesktop.com,PROXY
DOMAIN-SUFFIX,telega.one,PROXY
DOMAIN-SUFFIX,telegra.ph,PROXY
DOMAIN-SUFFIX,telegram-cdn.org,PROXY
DOMAIN-SUFFIX,telegram.dog,PROXY
DOMAIN-SUFFIX,telegram.me,PROXY
DOMAIN-SUFFIX,telegram.org,PROXY
DOMAIN-SUFFIX,telegram.space,PROXY
DOMAIN-SUFFIX,telegramdownload.com,PROXY
DOMAIN-SUFFIX,telesco.pe,PROXY
DOMAIN-SUFFIX,tg.dev,PROXY
DOMAIN-SUFFIX,tx.me,PROXY
DOMAIN-SUFFIX,usercontent.dev,PROXY

DOMAIN-KEYWORD,nicegram,PROXY
DOMAIN-KEYWORD,vscode,PROXY
DOMAIN-KEYWORD,ishosting,PROXY
DOMAIN-KEYWORD,ibyteimg,PROXY
DOMAIN-KEYWORD,telegram,PROXY

IP-CIDR,109.239.140.0/24,no-resolve
IP-CIDR,139.59.210.98/32,no-resolve
IP-CIDR,149.154.160.0/20,no-resolve
IP-CIDR,196.55.216.167/32,no-resolve
# IP-CIDR,2001:67c:4e8::/48,no-resolve
# IP-CIDR,2001:b28:f23c::/47,no-resolve
# IP-CIDR,2001:b28:f23f::/48,no-resolve
# IP-CIDR,2a0a:f280::/29,no-resolve
IP-CIDR,5.28.192.0/18,no-resolve
IP-CIDR,91.108.0.0/16,no-resolve
IP-ASN,211157,no-resolve
IP-ASN,44907,no-resolve
IP-ASN,59930,no-resolve
IP-ASN,62014,no-resolve
IP-ASN,62041,no-resolve

# Telegram
IP-CIDR,91.108.4.0/22,PROXY
IP-CIDR,91.108.8.0/22,PROXY
IP-CIDR,91.108.12.0/22,PROXY
IP-CIDR,91.108.16.0/22,PROXY
IP-CIDR,91.108.20.0/22,PROXY
IP-CIDR,91.108.36.0/23,PROXY
IP-CIDR,91.108.38.0/23,PROXY
IP-CIDR,91.108.40.0/22,PROXY
IP-CIDR,91.108.56.0/22,PROXY
IP-CIDR,149.154.160.0/20,PROXY
IP-CIDR,185.76.151.0/24,PROXY

# WhatsApp
IP-CIDR,18.192.0.0/15,PROXY
IP-CIDR,18.194.0.0/15,PROXY
IP-CIDR,18.196.0.0/15,PROXY
IP-CIDR,18.198.0.0/15,PROXY
IP-CIDR,31.13.24.0/21,PROXY
IP-CIDR,31.13.64.0/18,PROXY
IP-CIDR,45.64.40.0/22,PROXY
IP-CIDR,66.220.144.0/20,PROXY
IP-CIDR,69.63.176.0/20,PROXY
IP-CIDR,69.171.224.0/19,PROXY
IP-CIDR,74.119.76.0/22,PROXY
IP-CIDR,103.4.96.0/22,PROXY
IP-CIDR,129.134.0.0/17,PROXY
IP-CIDR,157.240.0.0/16,PROXY
IP-CIDR,173.252.64.0/18,PROXY
IP-CIDR,179.60.192.0/22,PROXY
IP-CIDR,185.60.216.0/22,PROXY
IP-CIDR,204.15.20.0/22,PROXY
# Unique WhatsApp infrastructure
IP-CIDR,3.33.221.48/32,PROXY
IP-CIDR,3.33.252.61/32,PROXY
IP-CIDR,15.197.206.217/32,PROXY
IP-CIDR,15.197.210.208/32,PROXY
IP-CIDR,34.192.181.12/32,PROXY
IP-CIDR,34.193.38.112/32,PROXY
IP-CIDR,34.194.71.217/32,PROXY
IP-CIDR,34.194.255.230/32,PROXY
IP-CIDR,102.132.96.0/20,PROXY
IP-CIDR,163.70.128.0/18,PROXY

# TikTok
IP-CIDR,37.19.202.0/24,PROXY
IP-CIDR,2.23.0.0/16,PROXY
IP-CIDR,2.22.0.0/16,PROXY
IP-CIDR,95.100.0.0/16,PROXY

# явные разрешения
# vps Yandex Cloud
IP-CIDR,178.154.203.168/32,DIRECT
# vps Finland
IP-CIDR,149.33.14.10/32,DIRECT
# vps new (max)
IP-CIDR,45.130.41.155/32,DIRECT
# domain 
DOMAIN-SUFFIX,7snake.com,DIRECT

FINAL,DIRECT

[Host]
localhost = 127.0.0.1

[Script]
yandex = type=http-request,engine=jsc,script-path=ai_studio_code-1.js,pattern=^https?:\/\/[^\/]*maps\.yandex\.(?:net|ru)(:\d+)?\/.*,max-size=524288,timeout=10,script-update-interval=0,enable=true

[MITM]
hostname = proxy.mob.maps.yandex.net,geointernal.mob.maps.yandex.net
ca-passphrase = eMdUcYRI
ca-p12 = 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
enable = true
